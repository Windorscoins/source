var _0x8135=['config','deleteQ','findAllQ','10m','valueOf','ETH','forEach','add','usd','div','length','create','./../models/ExchangeHistory','./LbSocket','underscore','bignumber.js'];(function(_0x56eb75,_0x5c47c0){var _0x5951e3=function(_0x3fc389){while(--_0x3fc389){_0x56eb75['push'](_0x56eb75['shift']());}};_0x5951e3(++_0x5c47c0);}(_0x8135,0xbc));var _0x5813=function(_0x50616f,_0x169cc2){_0x50616f=_0x50616f-0x0;var _0x5edaed=_0x8135[_0x50616f];return _0x5edaed;};'use strict';const ExchangeHistory=require(_0x5813('0x0'));const ExchangeData=require('./../models/ExchangeData');const LbSocket=require(_0x5813('0x1'));const _=require(_0x5813('0x2'));var bigNumber=require(_0x5813('0x3'));bigNumber[_0x5813('0x4')]({'DECIMAL_PLACES':0x8,'ERRORS':![],'ROUNDING_MODE':0x1});class LbExchangeHistory{constructor(){ExchangeData[_0x5813('0x5')]({'create':{'$ne':new Date()}},()=>{this['__Ini10m']();});}['__Ini10m'](){ExchangeData[_0x5813('0x6')]({'type':_0x5813('0x7')},(_0x3295a7,_0x6b4b42)=>{let _0x3101ea=()=>{setTimeout(()=>{_0x3101ea();},0x927c0);ExchangeHistory[_0x5813('0x6')]({'create':{'$gte':new Date()[_0x5813('0x8')]()-0x927c0},'market':_0x5813('0x9'),'usd':{'$ne':null}},(_0x1602d4,_0x280992)=>{let _0x3adb65=_0xe2af95=>{let _0x1aaea8=new bigNumber(0x0);_0xe2af95[_0x5813('0xa')](_0x3012b5=>{_0x1aaea8=_0x1aaea8[_0x5813('0xb')](_0x3012b5[_0x5813('0xc')]);});let _0x58f641=_0x1aaea8[_0x5813('0xd')](_0xe2af95[_0x5813('0xe')]);ExchangeData[_0x5813('0xf')]({'rate':_0x58f641,'type':'10m'},(_0x3386c9,_0x5076d)=>{LbSocket['sendExchange10m'](_0x5076d);});};if(_0x280992&&_0x280992[_0x5813('0xe')]){_0x3adb65(_0x280992);}else{ExchangeHistory[_0x5813('0x6')]({'usd':{'$ne':null}},(_0x57df76,_0xd88f23)=>{_0x3adb65(_0xd88f23);},0xa,0x0,{'create':-0x1});}},0x5,0x0);};if(_0x6b4b42&&_0x6b4b42[_0x5813('0xe')]){let _0x358c5a=_['first'](_0x6b4b42);let _0x2bbf85=new Date(_0x358c5a[_0x5813('0xf')])['valueOf']();let _0x2834e6=new Date()['valueOf']();let _0x56ebc0=_0x2834e6-_0x2bbf85;if(_0x56ebc0<0x927c0){setTimeout(()=>{_0x3101ea();},0x927c0-_0x56ebc0);}else{_0x3101ea();}}else{_0x3101ea();}},0x1,0x1,{'create':-0x1});}}module['exports']=new LbExchangeHistory();