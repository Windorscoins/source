var _0xff2f=['valueOf','getCoinConfig','ico_end_date','DD/MM/YYYY','sell_time_opened','sell_time','price','findOne','exports','./../models/CoinConfig','./../models/SysConfig','./../config/config','moment-timezone','getCoinExchange','length','time','startOf','day'];(function(_0x5c927e,_0x2da6c6){var _0x483a93=function(_0x173b13){while(--_0x173b13){_0x5c927e['push'](_0x5c927e['shift']());}};_0x483a93(++_0x2da6c6);}(_0xff2f,0x105));var _0xfff2=function(_0x4b1b1e,_0x591c2f){_0x4b1b1e=_0x4b1b1e-0x0;var _0x40d44d=_0xff2f[_0x4b1b1e];return _0x40d44d;};'use strict';const CoinConfig=require(_0xfff2('0x0'));const SysConfig=require(_0xfff2('0x1'));const Config=require(_0xfff2('0x2'));const moment=require(_0xfff2('0x3'));const ExchangeData=require('./../models/ExchangeData');class LbCoin{constructor(){}[_0xfff2('0x4')](_0x4377ee){ExchangeData['findAll']((_0x2e5c8e,_0x5ef36f)=>{if(_0x5ef36f&&_0x5ef36f[_0xfff2('0x5')]){_0x4377ee(_0x5ef36f[0x0]['rate']);}else{let _0x14a6cc=moment()['tz'](Config[_0xfff2('0x6')])[_0xfff2('0x7')](_0xfff2('0x8'))[_0xfff2('0x9')]();let _0x39cb46=new Date()['getTime']();SysConfig['GetValue'](_0x261334=>{this[_0xfff2('0xa')](_0x14a6cc,_0x59ad8f=>{let _0x14287d=moment['tz'](_0x261334[_0xfff2('0xb')],_0xfff2('0xc'),Config[_0xfff2('0x6')])[_0xfff2('0x7')](_0xfff2('0x8'))[_0xfff2('0x9')]()+_0x261334[_0xfff2('0xd')]+_0x261334[_0xfff2('0xe')];let _0x56991c=_0x59ad8f&&_0x59ad8f[_0xfff2('0xf')]?_0x59ad8f[_0xfff2('0xf')]:0x1;_0x4377ee(_0x56991c);});});}},0x1,0x1,{'create':-0x1});}['getCoinConfig'](_0x45acd7,_0x51926e){CoinConfig[_0xfff2('0x10')]({'date':new Date(_0x45acd7)},(_0x193e58,_0x1bc644)=>{if(!_0x1bc644){CoinConfig['findAllQ']({'date':{'$gte':new Date(_0x45acd7)}},(_0x1d84c2,_0x42d2b9)=>{if(_0x42d2b9){_0x51926e(_0x42d2b9[0x0]);}else{_0x51926e(![]);}},0x1,0x1,{'date':0x1});}else{_0x51926e(_0x1bc644);}});}}module[_0xfff2('0x11')]=new LbCoin();