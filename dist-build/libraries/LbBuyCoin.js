var _0xcdd5=['findOne','address','update','plus','balance','username','%\x20of\x20','statistics','buyDirect','exports','./../models/DirectBonus','./../models/Member','./../models/MemberBalance','./../models/Tx','./../models/WalletAddress','./../models/CoinTransaction','config','__Ini','findById','buyCoin','_id','div','times','bonus','valueOf','create','coinwallet','buy_direct','rootUsername'];(function(_0x4b84e1,_0x236d3e){var _0x3d694b=function(_0xfa764b){while(--_0xfa764b){_0x4b84e1['push'](_0x4b84e1['shift']());}};_0x3d694b(++_0x236d3e);}(_0xcdd5,0xd5));var _0x5cdd=function(_0x4bfd82,_0x25f530){_0x4bfd82=_0x4bfd82-0x0;var _0x552cb2=_0xcdd5[_0x4bfd82];return _0x552cb2;};'use strict';const CoinDirect=require(_0x5cdd('0x0'));const Member=require(_0x5cdd('0x1'));const MemberBalance=require(_0x5cdd('0x2'));const MemberStatistics=require('./../models/MemberStatistics');const Config=require('./../config/config');var bigNumber=require('bignumber.js');const Tx=require(_0x5cdd('0x3'));const WalletAddress=require(_0x5cdd('0x4'));const CoinTransaction=require(_0x5cdd('0x5'));bigNumber[_0x5cdd('0x6')]({'DECIMAL_PLACES':0x8,'ERRORS':![],'ROUNDING_MODE':0x1});class LbBuyCoin{constructor(){}[_0x5cdd('0x7')](_0x53b694,_0x3f6176,_0x15c443=0x1,_0x471a14){Member[_0x5cdd('0x8')](_0x53b694,(_0x184b28,_0x1ff667)=>{if(_0x1ff667&&_0x1ff667['referralid']){if(Config['bonus'][_0x5cdd('0x9')][_0x15c443]){Member[_0x5cdd('0x8')](_0x1ff667['referralid'],(_0x43f8ed,_0x5cda7d)=>{if(_0x5cda7d){if(_0x5cda7d&&_0x5cda7d['referralid']){this[_0x5cdd('0x7')](_0x5cda7d[_0x5cdd('0xa')],_0x3f6176,_0x15c443+0x1,_0x471a14);}let _0x5a2552=new bigNumber(_0x3f6176)[_0x5cdd('0xb')](0x64)[_0x5cdd('0xc')](Config[_0x5cdd('0xd')][_0x5cdd('0x9')][_0x15c443])[_0x5cdd('0xe')]();if(_0x5a2552){CoinTransaction[_0x5cdd('0xf')]({'member':_0x5cda7d[_0x5cdd('0xa')],'address':_0x5cda7d[_0x5cdd('0x10')],'plus':!![],'type':_0x5cdd('0x11'),'amount':new bigNumber(_0x5a2552),'description':'You\x20received\x20Coin\x20bonus\x20from\x20'+_0x471a14['username']+'\x20'+Config[_0x5cdd('0xd')][_0x5cdd('0x9')][_0x15c443]+'%\x20of\x20'+_0x3f6176+'\x20Coin'},()=>{});WalletAddress['findOne']({'member':_0x5cda7d[_0x5cdd('0xa')]},(_0x49bd4a,_0x2b377a)=>{Member['findOne']({'username':Config[_0x5cdd('0x12')]},(_0x1156dd,_0x40fb7e)=>{WalletAddress[_0x5cdd('0x13')]({'member':_0x40fb7e['_id']},(_0x2eee7a,_0x33dc59)=>{Tx[_0x5cdd('0xf')]({'from':_0x33dc59[_0x5cdd('0x14')],'to':_0x2b377a[_0x5cdd('0x14')],'amount':_0x5a2552,'status':0x1},()=>{WalletAddress[_0x5cdd('0x15')](_0x2b377a[_0x5cdd('0xa')],{'balance':new bigNumber(_0x2b377a['balance'])[_0x5cdd('0x16')](_0x5a2552),'totalReceived':new bigNumber(_0x2b377a['totalReceived'])[_0x5cdd('0x16')](_0x5a2552)},(_0x57488f,_0x4908ed)=>{WalletAddress[_0x5cdd('0x15')](_0x33dc59[_0x5cdd('0xa')],{'balance':new bigNumber(_0x33dc59[_0x5cdd('0x17')])['minus'](_0x5a2552),'totalSend':new bigNumber(_0x33dc59['totalSend'])['plus'](_0x5a2552)},(_0x4eb3d6,_0x416166)=>{});});});});});});CoinDirect[_0x5cdd('0xf')]({'member':_0x5cda7d[_0x5cdd('0xa')],'percent':Config['bonus'][_0x5cdd('0x9')][_0x15c443],'lv':_0x15c443,'amount':_0x5a2552,'description':'You\x20received\x20Coin\x20bonus\x20from\x20'+_0x471a14[_0x5cdd('0x18')]+'\x20'+Config[_0x5cdd('0xd')][_0x5cdd('0x9')][_0x15c443]+_0x5cdd('0x19')+_0x3f6176+'\x20Coin'},()=>{MemberBalance[_0x5cdd('0x8')](_0x5cda7d[_0x5cdd('0x17')],(_0x442844,_0x2e6c2)=>{MemberBalance['update'](_0x2e6c2['_id'],{'coin':new bigNumber(_0x2e6c2['coin'])[_0x5cdd('0x16')](_0x5a2552)[_0x5cdd('0xe')]()},()=>{MemberStatistics['findById'](_0x5cda7d[_0x5cdd('0x1a')],(_0x1d9da7,_0x464fad)=>{MemberStatistics[_0x5cdd('0x15')](_0x464fad[_0x5cdd('0xa')],{'balance.buyDirect':new bigNumber(_0x464fad[_0x5cdd('0x17')][_0x5cdd('0x1b')])[_0x5cdd('0x16')](_0x5a2552)['valueOf']()},()=>{});});});});});}}});}}});}}module[_0x5cdd('0x1c')]=new LbBuyCoin();