var _0xbb73=['passwordConfirmNotValid','twoFactor','authenticatorRequired','twoFactorValid','authenticatorNotValid','then','update','sign','jwt','findById','catch','json','exports','router','./../../../../../models/Member','jsonwebtoken','./../../../../../config/config','index','put','currentPassword','notEmpty','member','_id','currentPasswordNotValid','checkBody','password','passwordRequired','body','passwordConfirm','withMessage'];(function(_0x3a6957,_0x4ac0a){var _0x48f582=function(_0x1501c9){while(--_0x1501c9){_0x3a6957['push'](_0x3a6957['shift']());}};_0x48f582(++_0x4ac0a);}(_0xbb73,0x68));var _0x3bb7=function(_0x4e3151,_0x2fdfba){_0x4e3151=_0x4e3151-0x0;var _0x1fde6c=_0xbb73[_0x4e3151];return _0x1fde6c;};'use strict';const Core=require('./../../../../../core/core');const Member=require(_0x3bb7('0x0'));const JWT=require(_0x3bb7('0x1'));const Config=require(_0x3bb7('0x2'));class DefaultMemberChangePassword extends Core{constructor(){super();this[_0x3bb7('0x3')]();}[_0x3bb7('0x3')](){this[_0x3bb7('0x4')]('/',(_0x161e2b,_0x178aee)=>{_0x161e2b['checkBody'](_0x3bb7('0x5'),__('currentPasswordRequired'))[_0x3bb7('0x6')]()['checkMemberOldPassword'](_0x161e2b[_0x3bb7('0x7')][_0x3bb7('0x8')])['withMessage'](__(_0x3bb7('0x9')));_0x161e2b[_0x3bb7('0xa')](_0x3bb7('0xb'),__(_0x3bb7('0xc')))[_0x3bb7('0x6')]()['equals'](_0x161e2b[_0x3bb7('0xd')][_0x3bb7('0xe')])[_0x3bb7('0xf')](__(_0x3bb7('0x10')));_0x161e2b['checkBody'](_0x3bb7('0x11'),__(_0x3bb7('0x12')))[_0x3bb7('0x6')]()[_0x3bb7('0x13')](_0x161e2b[_0x3bb7('0x7')][_0x3bb7('0x8')])['withMessage'](__(_0x3bb7('0x14')));_0x161e2b['asyncValidationErrors']()[_0x3bb7('0x15')](()=>{Member[_0x3bb7('0x16')](_0x161e2b[_0x3bb7('0x7')]['_id'],{'password':JWT[_0x3bb7('0x17')]({'password':_0x161e2b[_0x3bb7('0xd')][_0x3bb7('0xb')]},Config[_0x3bb7('0x18')])},(_0x1430a9,_0x5289c0)=>{if(_0x1430a9){_0x178aee['json']({'status':![],'msg':_0x1430a9['toString']()});}else{Member[_0x3bb7('0x19')](_0x161e2b['member']['_id'],(_0x536086,_0x1246f4)=>{_0x161e2b[_0x3bb7('0x7')]=_0x1246f4;this['jsonToken'](_0x161e2b,_0x178aee);});}});})[_0x3bb7('0x1a')](_0x28c3ff=>{_0x178aee[_0x3bb7('0x1b')]({'status':![],'err':_0x28c3ff});});});}}module[_0x3bb7('0x1c')]=new DefaultMemberChangePassword()[_0x3bb7('0x1d')];