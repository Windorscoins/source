var _0x6ed3=['/phoneExists.html','phone','asyncValidationErrors','memberid','emailExists','/emailExists.html','emailRequired','exports','router','./../../../../../core/core','./../../../../../models/Member','phoneExists','usernameTransfer','post','/username-transfer.html','findOne','body','username','findById','member','_id','test','path','placement','json','pick','fullname','email','usernameExists','catch','checkBody','usernameRequired','notEmpty','then','toLocaleLowerCase'];(function(_0x21ba27,_0x570a3a){var _0x2a9a4b=function(_0x416c97){while(--_0x416c97){_0x21ba27['push'](_0x21ba27['shift']());}};_0x2a9a4b(++_0x570a3a);}(_0x6ed3,0xfe));var _0x36ed=function(_0x75ab8a,_0x5a0ec3){_0x75ab8a=_0x75ab8a-0x0;var _0xe9bb72=_0x6ed3[_0x75ab8a];return _0xe9bb72;};'use strict';const core=require(_0x36ed('0x0'));const Member=require(_0x36ed('0x1'));class MemberValodation extends core{constructor(){super();this['usernameExists']();this['emailExists']();this[_0x36ed('0x2')]();this[_0x36ed('0x3')]();}['usernameTransfer'](){this[_0x36ed('0x4')](_0x36ed('0x5'),(_0x1171b9,_0x3096d5)=>{_0x1171b9['checkBody']('username',__('usernameRequired'))['notEmpty']();_0x1171b9['asyncValidationErrors']()['then'](()=>{Member[_0x36ed('0x6')]({'username':_0x1171b9[_0x36ed('0x7')][_0x36ed('0x8')]},(_0x2ff411,_0x5dc05b)=>{if(_0x5dc05b){Member[_0x36ed('0x9')](_0x1171b9[_0x36ed('0xa')][_0x36ed('0xb')],(_0x1508fb,_0x31c345)=>{let _0x22e021=new RegExp(_0x31c345['_id'],'i')[_0x36ed('0xc')](_0x5dc05b[_0x36ed('0xd')][_0x36ed('0xe')]);let _0x15218c=new RegExp(_0x5dc05b['_id'],'i')[_0x36ed('0xc')](_0x31c345[_0x36ed('0xd')][_0x36ed('0xe')]);if(_0x22e021||_0x15218c){_0x3096d5[_0x36ed('0xf')]({'status':!![],'member':this['_'][_0x36ed('0x10')](_0x5dc05b,_0x36ed('0x8'),_0x36ed('0x11'),_0x36ed('0x12'),'phone')});}else{_0x3096d5['json']({'status':![],'err':__(_0x36ed('0x13'))});}});}else{_0x3096d5[_0x36ed('0xf')]({'status':![]});}});})[_0x36ed('0x14')](_0x147883=>{_0x3096d5[_0x36ed('0xf')]({'status':![],'err':_0x147883});});});}[_0x36ed('0x13')](){this[_0x36ed('0x4')]('/usernameExists.html',(_0x1f2172,_0x3bcd4f)=>{_0x1f2172[_0x36ed('0x15')](_0x36ed('0x8'),__(_0x36ed('0x16')))[_0x36ed('0x17')]();_0x1f2172['asyncValidationErrors']()[_0x36ed('0x18')](()=>{Member[_0x36ed('0x6')]({'usernameLowerCase':String(_0x1f2172['body'][_0x36ed('0x8')])[_0x36ed('0x19')]()},(_0xfdcc7e,_0x5ea788)=>{if(_0x5ea788){_0x3bcd4f[_0x36ed('0xf')]({'status':![],'err':__(_0x36ed('0x13'))});}else{_0x3bcd4f[_0x36ed('0xf')]({'status':!![]});}});})[_0x36ed('0x14')](_0xc12bf0=>{_0x3bcd4f[_0x36ed('0xf')]({'status':![],'err':_0xc12bf0});});});}['phoneExists'](){this[_0x36ed('0x4')](_0x36ed('0x1a'),(_0x3f9817,_0x31fa98)=>{_0x3f9817[_0x36ed('0x15')](_0x36ed('0x1b'),__('phoneRequired'))[_0x36ed('0x17')]();_0x3f9817[_0x36ed('0x1c')]()['then'](()=>{Member[_0x36ed('0x6')]({'phone':_0x3f9817[_0x36ed('0x7')][_0x36ed('0x1b')],'_id':{'$ne':_0x3f9817['body'][_0x36ed('0x1d')]||_0x3f9817[_0x36ed('0xa')][_0x36ed('0xb')]}},(_0x350cc7,_0x5af477)=>{if(_0x5af477){_0x31fa98[_0x36ed('0xf')]({'status':![],'err':__(_0x36ed('0x2'))});}else{_0x31fa98[_0x36ed('0xf')]({'status':!![]});}});})[_0x36ed('0x14')](_0x1c88fd=>{_0x31fa98['json']({'status':![],'err':_0x1c88fd});});});}[_0x36ed('0x1e')](){this[_0x36ed('0x4')](_0x36ed('0x1f'),(_0x11c492,_0x2fc562)=>{_0x11c492[_0x36ed('0x15')]('email',__(_0x36ed('0x20')))['notEmpty']();_0x11c492[_0x36ed('0x1c')]()['then'](()=>{Member['findOne']({'email':String(_0x11c492['body'][_0x36ed('0x12')])['toLocaleLowerCase'](),'_id':{'$ne':_0x11c492[_0x36ed('0x7')][_0x36ed('0x1d')]||null}},(_0x2481b0,_0x8d3a12)=>{if(_0x8d3a12){_0x2fc562[_0x36ed('0xf')]({'status':![],'err':__('emailExists')});}else{_0x2fc562[_0x36ed('0xf')]({'status':!![]});}});})[_0x36ed('0x14')](_0x50745b=>{_0x2fc562['json']({'status':![],'err':_0x50745b});});});}}module[_0x36ed('0x21')]=new MemberValodation()[_0x36ed('0x22')];