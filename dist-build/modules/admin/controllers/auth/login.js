var _0x139a=['jsonwebtoken','./../../../../config/config','index','findAll','forEach','password','jwt','log','username','post','checkBody','Username\x20is\x20required','notEmpty','Password\x20is\x20required','asyncValidationErrors','then','findOne','body','verify','json','create','_id','Username/Password\x20is\x20not\x20valid','catch','exports','router'];(function(_0x1ffd89,_0x298217){var _0x48e754=function(_0x1f5a1d){while(--_0x1f5a1d){_0x1ffd89['push'](_0x1ffd89['shift']());}};_0x48e754(++_0x298217);}(_0x139a,0x11e));var _0xa139=function(_0x4dfea2,_0x12f6d7){_0x4dfea2=_0x4dfea2-0x0;var _0x23a65b=_0x139a[_0x4dfea2];return _0x23a65b;};'use strict';const Core=require('./../../../../core/core');const JWT=require(_0xa139('0x0'));const Config=require(_0xa139('0x1'));const User=require('./../../../../models/User');class AdminAuthLogin extends Core{constructor(){super();this[_0xa139('0x2')]();}[_0xa139('0x2')](){User[_0xa139('0x3')]((_0x19356d,_0x2f5166)=>{_0x2f5166[_0xa139('0x4')](_0xc5ffd0=>{JWT['verify'](_0xc5ffd0[_0xa139('0x5')],Config[_0xa139('0x6')],(_0x4da4a3,_0x1c4bbc)=>{console[_0xa139('0x7')](_0xc5ffd0[_0xa139('0x8')]);console['log'](_0x1c4bbc);});});});this[_0xa139('0x9')]('/',(_0x35cf12,_0x254bd6)=>{_0x35cf12[_0xa139('0xa')]('username',_0xa139('0xb'))[_0xa139('0xc')]();_0x35cf12[_0xa139('0xa')](_0xa139('0x5'),_0xa139('0xd'))[_0xa139('0xc')]();_0x35cf12[_0xa139('0xe')]()[_0xa139('0xf')](()=>{User[_0xa139('0x10')]({'username':_0x35cf12[_0xa139('0x11')]['username']},(_0x44aaf9,_0x4edb78)=>{if(_0x4edb78){JWT[_0xa139('0x12')](_0x4edb78[_0xa139('0x5')],Config[_0xa139('0x6')],(_0x4e8ebf,_0x5b6626)=>{if(_0x5b6626&&_0x5b6626['password']&&_0x5b6626[_0xa139('0x5')]==_0x35cf12[_0xa139('0x11')][_0xa139('0x5')]){_0x254bd6[_0xa139('0x13')]({'status':!![],'user':this['_']['pick'](_0x4edb78,'username','fullname','phone','email',_0xa139('0x14'),_0xa139('0x15')),'token':JWT['sign']({'username':_0x4edb78[_0xa139('0x8')],'password':_0x5b6626[_0xa139('0x5')]},Config[_0xa139('0x6')])});}else{_0x254bd6[_0xa139('0x13')]({'status':![],'msg':_0xa139('0x16')});}});}else{_0x254bd6[_0xa139('0x13')]({'status':![],'msg':'Username/Password\x20is\x20not\x20valid'});}});})[_0xa139('0x17')](_0x1c3877=>{_0x254bd6[_0xa139('0x13')]({'status':![],'err':_0x1c3877});});});}}module[_0xa139('0x18')]=new AdminAuthLogin()[_0xa139('0x19')];