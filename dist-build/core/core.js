var _0xbac9=['exports','./base/controller','./../models/SysConfig','./../config/config','./../libraries/LbCoinmarketcap','./../models/MemberBalance','./../models/MemberStatistics','./../libraries/LbSocket','jsonwebtoken','./../libraries/LbCoin','member','clone','parse','sendToMember','jsonToken','verify','jwt','balance','findById','getConfig','json','extend','pick','username','email','phone','memwallet','syswallet','gender','address','coinwallet','twoFactorActive','country','binary','isIni','getTime','sign','password','updateConfig','updateWalletTransaction','updateMemberTransaction','update-member-transaction','findAll','length','value','time','startOf','valueOf','findOne','_id','stringify','findAllQ','forEach','qty','getCoinExchange','omit','auto_withdraw_comfirm','sold','price','date','max'];(function(_0x3c8c2e,_0x183f5e){var _0x4898a0=function(_0x4d2926){while(--_0x4d2926){_0x3c8c2e['push'](_0x3c8c2e['shift']());}};_0x4898a0(++_0x183f5e);}(_0xbac9,0x7b));var _0x9bac=function(_0x7a7f8f,_0x5ac12f){_0x7a7f8f=_0x7a7f8f-0x0;var _0x2f1af6=_0xbac9[_0x7a7f8f];return _0x2f1af6;};'use strict';const Controller=require(_0x9bac('0x0'));const SysConfig=require(_0x9bac('0x1'));const CoinConfig=require('./../models/CoinConfig');const Config=require(_0x9bac('0x2'));const moment=require('moment-timezone');const LbCoinmarketcap=require(_0x9bac('0x3'));const MemberBuyCoin=require('./../models/MemberBuyCoin');const MemberBalance=require(_0x9bac('0x4'));const MemberStatistics=require(_0x9bac('0x5'));const MemberBuyICOOrder=require('./../models/MemberBuyICOOrder');const LbSocket=require(_0x9bac('0x6'));const JWT=require(_0x9bac('0x7'));const LbCoin=require(_0x9bac('0x8'));class MyController extends Controller{constructor(_0x512975=_0x9bac('0x9')){super(_0x512975);}[_0x9bac('0xa')](_0x3b05d9){return JSON[_0x9bac('0xb')](JSON['stringify'](_0x3b05d9));}['DoUpdateInfo'](_0x51da14){LbSocket['sendToMember'](_0x51da14,'do-update-info',{'update':!![]});}['sendAll'](_0x2c0a09,_0x589b60){LbSocket['io']['emit'](_0x2c0a09,_0x589b60);}[_0x9bac('0xc')](_0x20e817,_0x22ca20){LbSocket[_0x9bac('0xc')](_0x20e817,_0x22ca20,{'update':!![]});}[_0x9bac('0xd')](_0x33191a,_0x227ae8,_0x2b4b03=!![]){let _0xce199=_0x33191a['member'];JWT[_0x9bac('0xe')](_0xce199['password'],Config[_0x9bac('0xf')],(_0x3d8945,_0x420ad8)=>{MemberBalance['findById'](_0xce199[_0x9bac('0x10')],(_0x58e4ba,_0x20bd04)=>{MemberStatistics[_0x9bac('0x11')](_0xce199['statistics'],(_0xeff32a,_0x59eea8)=>{_0x33191a[_0x9bac('0x9')]=_0xce199;this[_0x9bac('0x12')](_0x33191a,_0x227ae8,_0xb55001=>{_0x227ae8[_0x9bac('0x13')]({'status':!![],'member':this['_'][_0x9bac('0x14')](this['_'][_0x9bac('0x15')](_0xce199,_0x9bac('0x16'),_0x9bac('0x17'),_0x9bac('0x18'),'fullname',_0x9bac('0x19'),_0x9bac('0x1a'),_0x9bac('0x1b'),_0x9bac('0x1c'),_0x9bac('0x1d'),_0x9bac('0x1e'),'lv',_0x9bac('0x1f')),{'binaryIni':_0xce199['path'][_0x9bac('0x20')][_0x9bac('0x21')]}),'balance':_0x20bd04,'time':new Date()[_0x9bac('0x22')](),'token':_0x2b4b03?JWT[_0x9bac('0x23')]({'username':_0xce199[_0x9bac('0x16')],'password':_0x420ad8[_0x9bac('0x24')]},Config[_0x9bac('0xf')],{'expiresIn':0x3c*0x1e}):![],'config':_0xb55001,'statistics':_0x59eea8});});});});});}[_0x9bac('0x25')](){LbSocket['updateConfig']();}[_0x9bac('0x26')](){LbSocket['updateWalletTransaction']();}[_0x9bac('0x27')](_0x44ea31){LbSocket[_0x9bac('0xc')](_0x44ea31,_0x9bac('0x28'),{'update':!![]});}[_0x9bac('0x12')](_0x3ce067,_0x21be89,_0x4c51d4){LbCoinmarketcap['getTicker'](_0x180acf=>{SysConfig[_0x9bac('0x29')]((_0x17f8c8,_0x5d1f2c)=>{let _0x4a03ac={};if(_0x5d1f2c&&_0x5d1f2c[_0x9bac('0x2a')]){_0x5d1f2c['forEach'](_0x54fd21=>{_0x4a03ac[_0x54fd21['code']]=isNaN(_0x54fd21[_0x9bac('0x2b')])?_0x54fd21['value']:+_0x54fd21['value'];});}let _0x17d61d=moment()['tz'](Config[_0x9bac('0x2c')])[_0x9bac('0x2d')]('day')[_0x9bac('0x2e')]();MemberBuyCoin[_0x9bac('0x2f')]({'date':new Date(_0x17d61d),'member':_0x3ce067['member'][_0x9bac('0x30')]},(_0x5c1f0c,_0x13fb01)=>{let _0x11a413=JSON[_0x9bac('0xb')](JSON[_0x9bac('0x31')](_0x13fb01));if(!_0x11a413){_0x11a413={'qty':0x0};}MemberBuyICOOrder[_0x9bac('0x32')]({'member':_0x3ce067[_0x9bac('0x9')][_0x9bac('0x30')],'active':![],'cancel':![]},(_0x5b98fa,_0x3b58c3)=>{if(_0x3b58c3&&_0x3b58c3[_0x9bac('0x2a')]){_0x3b58c3[_0x9bac('0x33')](_0x500e57=>{_0x11a413['qty']+=_0x500e57[_0x9bac('0x34')];});}CoinConfig['findOne']({'date':new Date(_0x17d61d)},(_0x1cbcff,_0x492fe5)=>{CoinConfig['findAllQ']({'date':{'$gte':new Date(_0x17d61d)}},(_0x55f671,_0x5eccce)=>{LbCoin[_0x9bac('0x35')](_0x500149=>{_0x4c51d4({'sysConfig':this['_'][_0x9bac('0x36')](_0x4a03ac,_0x9bac('0x37')),'coinConfig':this['_'][_0x9bac('0x15')](_0x492fe5,_0x9bac('0x34'),_0x9bac('0x38'),_0x9bac('0x39'),'max',_0x9bac('0x3a')),'nextCoinConfig':this['_'][_0x9bac('0x15')](_0x5eccce?_0x5eccce[0x0]:{},_0x9bac('0x34'),_0x9bac('0x38'),_0x9bac('0x39'),_0x9bac('0x3b'),'date'),'memberBuyCoin':_0x11a413,'coinRate':_0x500149,'ticker':_0x180acf});});},0x1,0x1,{'date':0x1});});});});});});}}module[_0x9bac('0x3c')]=MyController;