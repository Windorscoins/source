var _0x4d37=['length','username','fullname','create','referralid','findById','statistics','country','extend','investment','total','name','forEach','sub','totalSub','push','./../../../core/token','./../../../models/MemberStatistics','exports','token','_id'];(function(_0x27f5d2,_0x4f04f6){var _0x40842d=function(_0x27f38b){while(--_0x27f38b){_0x27f5d2['push'](_0x27f5d2['shift']());}};_0x40842d(++_0x4f04f6);}(_0x4d37,0x1de));var _0x74d3=function(_0x4c8406,_0x4b43db){_0x4c8406=_0x4c8406-0x0;var _0x5c5c4c=_0x4d37[_0x4c8406];return _0x5c5c4c;};'use strict';const Token=require(_0x74d3('0x0'));const Member=require('./../../../models/Member');const MemberStatistics=require(_0x74d3('0x1'));const Country=require('./../../../models/Country');const _=require('underscore');module[_0x74d3('0x2')]=(_0x225225,_0x1c7695)=>{return(_0xb1f000,_0x4f59f1)=>{if(_0xb1f000&&_0xb1f000[_0x74d3('0x3')]){new Token(_0xb1f000[_0x74d3('0x3')],_0x19dc7a=>{if(_0x19dc7a){Member['findAllQ']({'path.placement':new RegExp(String(_0x19dc7a[_0x74d3('0x4')]),'i'),'_id':{'$ne':_0x19dc7a[_0x74d3('0x4')]}},(_0x326556,_0x563f0e)=>{let _0x196aeb=[];if(!_0x563f0e||!_0x563f0e[_0x74d3('0x5')]){return _0x4f59f1({'status':!![],'members':[]});}let _0x91cceb=(_0x69d8cc,_0x570009)=>{let _0x2cae26=_['pick'](_0x69d8cc,_0x74d3('0x6'),_0x74d3('0x7'),'_id',_0x74d3('0x8'),_0x74d3('0x9'));let _0x2eeab9=new Promise((_0x23043d,_0x5b4ac7)=>{MemberStatistics[_0x74d3('0xa')](_0x69d8cc[_0x74d3('0xb')],(_0x16241e,_0x56d552)=>{Country[_0x74d3('0xa')](_0x69d8cc[_0x74d3('0xc')],(_0x7e71e3,_0x1c3291)=>{_0x2cae26=_[_0x74d3('0xd')]({'statistics':{'buycoin':_0x56d552['buycoin'],'investment':_0x56d552[_0x74d3('0xe')][_0x74d3('0xf')]['USD']}},{'country':_0x1c3291?_0x1c3291[_0x74d3('0x10')]:''},_0x2cae26);_0x563f0e[_0x570009]=_0x2cae26;_0x23043d();});});});_0x196aeb['push'](_0x2eeab9);};_0x563f0e[_0x74d3('0x11')]((_0x4a4bb5,_0x1c4092)=>{_0x91cceb(_0x4a4bb5,_0x1c4092);});let _0x1331c6=(_0x3c4052,_0x63b1dd=0x0)=>{if(_0x3c4052&&_0x3c4052[_0x74d3('0x5')]){_0x63b1dd+=_0x3c4052['length'];_0x3c4052[_0x74d3('0x11')](_0x1ce9f2=>{_0x63b1dd+=_0x1331c6(_0x1ce9f2[_0x74d3('0x12')]);});}return _0x63b1dd;};Promise['all'](_0x196aeb)['then'](()=>{let _0x4934dd=(_0x5b39a0,_0x31d10e,_0x53689e,_0x283610=[])=>{_0x5b39a0[_0x74d3('0x11')](_0x5cf515=>{if(String(_0x5cf515[_0x74d3('0x9')])==_0x31d10e){_0x5cf515[_0x74d3('0x12')]=_0x4934dd(_0x5b39a0,_0x5cf515['_id'],_0x53689e+0x1);_0x5cf515[_0x74d3('0x13')]=_0x1331c6(_0x5cf515['sub']);_0x5cf515['lv']=_0x53689e;_0x283610[_0x74d3('0x14')](_0x5cf515);}});return _0x283610;};return _0x4f59f1({'status':!![],'members':_0x4934dd(_0x563f0e,String(_0x19dc7a[_0x74d3('0x4')]),0x1)});});});}else{_0x4f59f1({'status':![],'login':!![]});}});}else{_0x4f59f1({'status':![],'login':!![]});}};};