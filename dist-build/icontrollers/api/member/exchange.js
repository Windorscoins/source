var _0x5f66=['market','BTC','type','coin','PacIsNotEnoughToSell','locale','times','exchange','btcWalletNotEnoughBuyPac','ETH','plus','fee','createExchange','./../../../core/token','./../../../libraries/LbExchange','./../../../libraries/LbExchangeETH','./../../../models/MemberBalance','underscore','config','exports','token','rate','replace','btlAmountNotValid','pricePerPacNotValid','balance'];(function(_0x4f7409,_0x40dbe7){var _0x45cdce=function(_0x2c69f1){while(--_0x2c69f1){_0x4f7409['push'](_0x4f7409['shift']());}};_0x45cdce(++_0x40dbe7);}(_0x5f66,0x145));var _0x65f6=function(_0x331b3d,_0x5a1637){_0x331b3d=_0x331b3d-0x0;var _0xfdbc4f=_0x5f66[_0x331b3d];return _0xfdbc4f;};'use strict';const Token=require(_0x65f6('0x0'));const LbExchange=require(_0x65f6('0x1'));const LbExchangeETH=require(_0x65f6('0x2'));const MemberBalance=require(_0x65f6('0x3'));const Config=require('./../../../config/config');var _=require(_0x65f6('0x4'));var bigNumber=require('bignumber.js');bigNumber[_0x65f6('0x5')]({'DECIMAL_PLACES':0x8,'ERRORS':![],'ROUNDING_MODE':0x1});module[_0x65f6('0x6')]=(_0x4ec221,_0x4ed98f)=>{return(_0x1c0e12,_0x2c6571)=>{if(_0x1c0e12&&_0x1c0e12[_0x65f6('0x7')]){new Token(_0x1c0e12[_0x65f6('0x7')],_0xc44c70=>{if(_0xc44c70){let _0x14f4c7=+(_0x1c0e12['amount']||'')['replace'](',','');let _0x18fea1=+(_0x1c0e12[_0x65f6('0x8')]||'')[_0x65f6('0x9')](',','');if(_0x14f4c7<=0x0){return _0x2c6571({'status':![],'msg':__({'phrase':_0x65f6('0xa'),'locale':_0x1c0e12['locale']||'en'})});}else if(_0x18fea1<=0x0){return _0x2c6571({'status':![],'msg':__({'phrase':_0x65f6('0xb'),'locale':_0x1c0e12['locale']||'en'})});}else{MemberBalance['findById'](_0xc44c70[_0x65f6('0xc')],(_0x576875,_0x419819)=>{let _0x4862a5=_0x1c0e12[_0x65f6('0xd')]||_0x65f6('0xe');if(_0x1c0e12[_0x65f6('0xf')]=='S'){if(_0x419819[_0x65f6('0x10')]<_0x14f4c7){return _0x2c6571({'status':![],'msg':__({'phrase':_0x65f6('0x11'),'locale':_0x1c0e12[_0x65f6('0x12')]||'en'})});}}else{if(_0x4862a5==_0x65f6('0xe')){if(_0x419819[_0x65f6('0xe')]<new bigNumber(_0x14f4c7)[_0x65f6('0x13')](_0x18fea1)[_0x65f6('0x13')](new bigNumber(0x1)['plus'](Config[_0x65f6('0x14')]['fee']))['valueOf']()){return _0x2c6571({'status':![],'msg':__({'phrase':_0x65f6('0x15'),'locale':_0x1c0e12[_0x65f6('0x12')]||'en'})});}}else{if(_0x419819[_0x65f6('0x16')]<new bigNumber(_0x14f4c7)[_0x65f6('0x13')](_0x18fea1)[_0x65f6('0x13')](new bigNumber(0x1)[_0x65f6('0x17')](Config[_0x65f6('0x14')][_0x65f6('0x18')]))['valueOf']()){return _0x2c6571({'status':![],'msg':__({'phrase':'ethWalletNotEnoughBuyPac','locale':_0x1c0e12[_0x65f6('0x12')]||'en'})});}}}if(_0x4862a5=='BTC'){LbExchange['createExchange'](_0xc44c70,_0x14f4c7,_0x18fea1,_0x1c0e12['type']||'B',()=>{_0x2c6571({'status':!![]});});}else{LbExchangeETH[_0x65f6('0x19')](_0xc44c70,_0x14f4c7,_0x18fea1,_0x1c0e12[_0x65f6('0xf')]||'B',()=>{_0x2c6571({'status':!![]});});}});}}else{_0x2c6571({'status':![],'login':!![]});}});}else{_0x2c6571({'status':![],'login':!![]});}};};