var _0xeb39=['findOne','_id','class','lastUpdate','isAdmin','messages','forEach','push','pick','content','create','messageNotValid','locale','./../../../models/Messages','./../../../core/token','exports','token','messageid'];(function(_0x52081b,_0x3a9a3a){var _0x3ba376=function(_0xc5cfff){while(--_0xc5cfff){_0x52081b['push'](_0x52081b['shift']());}};_0x3ba376(++_0x3a9a3a);}(_0xeb39,0x1e1));var _0x9eb3=function(_0x37070a,_0x5fba0f){_0x37070a=_0x37070a-0x0;var _0x1b6163=_0xeb39[_0x37070a];return _0x1b6163;};'use strict';const Messages=require(_0x9eb3('0x0'));const Token=require(_0x9eb3('0x1'));const _=require('underscore');module[_0x9eb3('0x2')]=(_0x1a4fa8,_0x5361aa)=>{return(_0xdd9192,_0x5b7a73)=>{if(_0xdd9192&&_0xdd9192['token']){new Token(_0xdd9192[_0x9eb3('0x3')],_0x35495c=>{if(_0x35495c){if(_0xdd9192[_0x9eb3('0x4')]){Messages[_0x9eb3('0x5')]({'_id':_0xdd9192[_0x9eb3('0x4')],'member':_0x35495c[_0x9eb3('0x6')]},(_0x1268a8,_0x2a1986)=>{if(_0x2a1986){Messages['update'](_0x2a1986[_0x9eb3('0x6')],{'memberRead':!![]},()=>{});let _0x4ab62a=_['pick'](_0x2a1986,'create','subject','status',_0x9eb3('0x7'),_0x9eb3('0x8'),_0x9eb3('0x9'),_0x9eb3('0x6'));_0x4ab62a['messages']=[];_0x2a1986[_0x9eb3('0xa')][_0x9eb3('0xb')](_0x279e32=>{_0x4ab62a[_0x9eb3('0xa')][_0x9eb3('0xc')](_[_0x9eb3('0xd')](_0x279e32,'isAdmin',_0x9eb3('0xe'),_0x9eb3('0xf')));});_0x5b7a73({'status':!![],'message':_0x4ab62a});}else{_0x5b7a73({'status':![],'msg':__({'phrase':_0x9eb3('0x10'),'locale':_0xdd9192[_0x9eb3('0x11')]||'en'})});}});}else{_0x5b7a73({'status':![],'msg':__({'phrase':_0x9eb3('0x10'),'locale':_0xdd9192['locale']||'en'})});}}else{_0x5b7a73({'status':![],'login':!![]});}});}else{_0x5b7a73({'status':![],'login':!![]});}};};