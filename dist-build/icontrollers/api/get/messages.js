var _0xa468=['subject','create','lastUpdate','memberRead','class','messages','content','files','fullname','support','user','findById','Support','then','omit','results','per_page','page','./../../../models/Messages','./../../../models/Support','./../../../core/token','underscore','exports','token','_id','forEach','push','pick'];(function(_0x3bb8f1,_0x5d149e){var _0x53ca89=function(_0x1a3c86){while(--_0x1a3c86){_0x3bb8f1['push'](_0x3bb8f1['shift']());}};_0x53ca89(++_0x5d149e);}(_0xa468,0x9e));var _0x8a46=function(_0x4c38bd,_0x28daab){_0x4c38bd=_0x4c38bd-0x0;var _0x8e3fbb=_0xa468[_0x4c38bd];return _0x8e3fbb;};'use strict';const Messages=require(_0x8a46('0x0'));const Support=require(_0x8a46('0x1'));const User=require('./../../../models/User');const Token=require(_0x8a46('0x2'));const _=require(_0x8a46('0x3'));module[_0x8a46('0x4')]=(_0x994c5e,_0x126f74)=>{return(_0xf1129,_0xf12c98)=>{if(_0xf1129&&_0xf1129[_0x8a46('0x5')]){new Token(_0xf1129['token'],_0x441044=>{if(_0x441044){Messages['findAllQ']({'member':_0x441044[_0x8a46('0x6')]},(_0x14fbaa,_0x10ae47,_0x3abe48)=>{let _0x99aba4=[];_0x10ae47[_0x8a46('0x7')]((_0x19ee3e,_0x54d77b)=>{_0x99aba4[_0x8a46('0x8')](new Promise((_0x54eb0f,_0x4d12fd)=>{let _0x5d9331=_[_0x8a46('0x9')](_0x19ee3e,_0x8a46('0xa'),_0x8a46('0xb'),_0x8a46('0xc'),_0x8a46('0xd'),'messages','status',_0x8a46('0xe'),_0x8a46('0x6'));_0x5d9331[_0x8a46('0xf')][_0x8a46('0x7')]((_0x22ad05,_0x3b5d6f)=>{let _0x269086=_[_0x8a46('0x9')](_0x22ad05,_0x8a46('0x10'),'memberRead',_0x8a46('0xb'),_0x8a46('0x11'));_0x5d9331[_0x8a46('0xf')][_0x3b5d6f]=_0x269086;});_0x10ae47[_0x54d77b]=_0x5d9331;Support['findById'](_0x19ee3e['support'],(_0x4c896d,_0x98cb82)=>{if(_0x98cb82){if(_0x98cb82[_0x8a46('0x12')]){_0x10ae47[_0x54d77b][_0x8a46('0x13')]={'fullname':_0x98cb82[_0x8a46('0x12')]};_0x54eb0f();}else if(_0x98cb82[_0x8a46('0x14')]){User[_0x8a46('0x15')](_0x98cb82['user'],(_0x3002cf,_0x562016)=>{if(_0x562016){_0x10ae47[_0x54d77b]['support']={'fullname':_0x562016[_0x8a46('0x12')]||'Support'};_0x54eb0f();}else{_0x10ae47[_0x54d77b][_0x8a46('0x13')]={'fullname':_0x8a46('0x16')};_0x54eb0f();}});}else{_0x10ae47[_0x54d77b][_0x8a46('0x13')]={'fullname':_0x8a46('0x16')};_0x54eb0f();}}else{_0x10ae47[_0x54d77b][_0x8a46('0x13')]={'fullname':_0x8a46('0x16')};_0x54eb0f();}});}));});Promise['all'](_0x99aba4)[_0x8a46('0x17')](()=>{_0xf12c98({'status':!![],'messages':_0x10ae47,'pagination':_[_0x8a46('0x18')](_0x3abe48,_0x8a46('0x19'))});});},+_0xf1129[_0x8a46('0x1a')]||0x5,+_0xf1129[_0x8a46('0x1b')]||0x1,{'lastUpdate':-0x1});}else{_0xf12c98({'status':![],'login':!![]});}});}else{_0xf12c98({'status':![],'login':!![]});}};};