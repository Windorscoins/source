var _0x480f=['content','contentRequired','locale','messageid','messageNotValid','findOne','_id','./../../../core/token','./../../../models/Messages','exports','token'];(function(_0x2ddd5b,_0x409e8a){var _0xa4ac21=function(_0x274a1c){while(--_0x274a1c){_0x2ddd5b['push'](_0x2ddd5b['shift']());}};_0xa4ac21(++_0x409e8a);}(_0x480f,0x1b4));var _0xf480=function(_0x313378,_0x4085c1){_0x313378=_0x313378-0x0;var _0x58c6e0=_0x480f[_0x313378];return _0x58c6e0;};'use strict';const Token=require(_0xf480('0x0'));const Messages=require(_0xf480('0x1'));module[_0xf480('0x2')]=(_0x37d0b5,_0x53dacd)=>{return(_0x35fe10,_0x440130)=>{if(_0x35fe10&&_0x35fe10[_0xf480('0x3')]){new Token(_0x35fe10[_0xf480('0x3')],_0x40ef00=>{if(_0x40ef00){if(!_0x35fe10[_0xf480('0x4')]){_0x440130({'status':![],'msg':__({'phrase':_0xf480('0x5'),'locale':_0x35fe10[_0xf480('0x6')]||'en'})});}else if(!_0x35fe10[_0xf480('0x7')]){_0x440130({'status':![],'msg':__({'phrase':_0xf480('0x8'),'locale':_0x35fe10[_0xf480('0x6')]||'en'})});}else{Messages[_0xf480('0x9')]({'_id':_0x35fe10[_0xf480('0x7')],'member':_0x40ef00[_0xf480('0xa')]},(_0x3df85c,_0x27757e)=>{if(_0x27757e){Messages['update'](_0x35fe10[_0xf480('0x7')],{'adminRead':![],'memberRead':!![],'lastUpdate':new Date(),'$push':{'messages':{'content':_0x35fe10[_0xf480('0x4')]}}},()=>{_0x440130({'status':!![]});});}else{_0x440130({'status':![],'msg':__({'phrase':_0xf480('0x8'),'locale':_0x35fe10[_0xf480('0x6')]||'en'})});}});}}else{_0x440130({'status':![],'login':!![]});}});}else{_0x440130({'status':![],'login':!![]});}};};